# =============================================================================
# ?? TITAN CORE BANKING CONFIGURATION (HYBRID: LOCAL MAC & PROXMOX SERVER)
# =============================================================================

# -----------------------------------------------------------------------------
# 1. DATABASE CONFIGURATION (PostgreSQL)
# -----------------------------------------------------------------------------
# ?? PROXMOX / SERVER NOTE:
# ???? Server (Docker Compose), ?????????? Environment Variable "SPRING_DATASOURCE_URL"
# ?????????????? Container ????? "titan-db-prod" ?
#
# ? LOCAL MAC NOTE:
# ???? Mac, ?????? Default Value ????????????? ":" (localhost:5432/titan_bank)
# ??????????????? Docker Container "titan-db-local" ???????????????????

spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/titan_bank}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:postgres}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:password}
spring.datasource.driver-class-name=org.postgresql.Driver

# -----------------------------------------------------------------------------
# 2. JPA / HIBERNATE
# -----------------------------------------------------------------------------
# ?????? Table ???????????????? (?????????? Dev, ?????????????????? Prod)
spring.jpa.hibernate.ddl-auto=update

# ?????? SQL Query ????? Log (????????????? Server ??????????? Log ???)
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# -----------------------------------------------------------------------------
# 3. REDIS CONFIGURATION (Caching)
# -----------------------------------------------------------------------------
# ?? PROXMOX: ??????? Hostname "titan-redis-prod"
# ? LOCAL: ??????? "localhost" (??????????????????? Redis ?? Mac ? Docker)
spring.data.redis.host=${SPRING_DATA_REDIS_HOST:localhost}
spring.data.redis.port=${SPRING_DATA_REDIS_PORT:6379}
# spring.data.redis.password=${SPRING_DATA_REDIS_PASSWORD:}

# -----------------------------------------------------------------------------
# 4. PERFORMANCE
# -----------------------------------------------------------------------------
# Java 21 Virtual Threads (Loom) - ???????????! ?
spring.threads.virtual.enabled=true
spring.jmx.enabled=false

# -----------------------------------------------------------------------------
# 5. SECURITY / JWT CONFIGURATION
# -----------------------------------------------------------------------------
# Expiration: 14 ???? (1209600000 ms)
app.jwt.expiration-ms=1209600000
app.jwt.secret=${JWT_SECRET:MySuperSecretKeyForTitanCoreBanking2026}

# -----------------------------------------------------------------------------
# 6. MICROSERVICES INTEGRATION (The New Stuff ??)
# -----------------------------------------------------------------------------
# ? Python AI Risk Engine (Port 8082)
# ?? PROXMOX: ??????????? Env Var "RISK_ENGINE_URL" ?????? Container Python
risk.engine.url=${RISK_ENGINE_URL:http://localhost:8082}

# ? Golang Notification Service (Port 8081)
# ?? PROXMOX: ??????????? Env Var "NOTIFICATION_SERVICE_URL" ?????? Container Golang
notification.service.url=${NOTIFICATION_SERVICE_URL:http://localhost:8081}


grpc.client.riskEngineClient.address=static://localhost:50051
grpc.client.riskEngineClient.negotiation-type=plaintext

titan.ai.host=${AI_HOST:localhost}
titan.ai.port=${AI_PORT:50051}

# បើក Actuator endpoints ទាំងអស់ (ឬយ៉ាងហោចណាស់ឱ្យស្គាល់ prometheus)
management.endpoints.web.exposure.include=health,info,prometheus

# បង្ហាញព័ត៌មានលម្អិតនៃសុខភាពប្រព័ន្ធ
management.endpoint.health.show-details=always

# កំណត់ឈ្មោះឱ្យប្រព័ន្ធសម្រាប់បង្ហាញក្នុង Grafana
spring.application.name=titan-core-banking

# ??? Endpoint ??????? Prometheus
management.endpoints.web.exposure.include=prometheus,health,info

# ???????????????????????? Health Check (?????????? SRE)
management.endpoint.health.show-details=always

# ????????????????????????????
management.endpoints.web.exposure.include=health,info,prometheus,metrics