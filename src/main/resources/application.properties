# ==========================================
# ? TITAN CORE - INTELLIJ LOCAL CONFIG
# ==========================================

# 1. ? DATABASE (Matches your NEW Docker file)
spring.datasource.url=jdbc:postgresql://localhost:5432/titandb
spring.datasource.username=postgres
spring.datasource.password=mysecretpassword
spring.datasource.driver-class-name=org.postgresql.Driver

# 2. ? MIGRATION (Flyway)
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.locations=classpath:db/migration
# IMPORTANT: Must match the DB user above
spring.flyway.user=postgres
spring.flyway.password=mysecretpassword

# 3. ?? JPA VALIDATION
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# 4. ? REDIS
spring.data.redis.host=localhost
spring.data.redis.port=6379

# 5. ? AI ENGINE (Python)
titan.ai.host=localhost
titan.ai.port=50051
grpc.client.riskEngineClient.address=static://localhost:50051
grpc.client.riskEngineClient.negotiationType=PLAINTEXT

# 6. ? SECURITY
app.jwt.secret=MySuperSecretKeyForTitanCoreBanking2026
app.jwt.expiration-ms=86400000

server.port=8080

# ?? RESILIENCE4J (CIRCUIT BREAKER)
# ==========================================
# If 50% of requests fail, open the circuit (stop calling Python).
resilience4j.circuitbreaker.instances.risk-engine.failure-rate-threshold=50
# Wait 5 seconds before trying Python again.
resilience4j.circuitbreaker.instances.risk-engine.wait-duration-in-open-state=5s
# How many calls to measure? (Last 10 calls)
resilience4j.circuitbreaker.instances.risk-engine.sliding-window-size=10