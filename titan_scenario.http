### ğŸŒ GLOBAL CONFIGURATION
@host = http://100.117.33.69:8080
@contentType = application/json

# ==========================================
# ğŸ‘¤ á‡áŸ†á á¶á“á‘á¸ áŸ¡: á”á„áŸ’á€á¾á BOSS (á¢áŸ’á“á€á˜á¶á“)
# ==========================================
# 1.1 Register
POST {{host}}/api/auth/register
Content-Type: {{contentType}}

{
  "firstname": "Big",
  "lastname": "Boss",
  "username": "boss_v2",
  "email": "boss_v2@titan.com",
  "password": "password123",
  "pin": "123456"
}

### 1.2 Login Boss (á™á€ Token)
POST {{host}}/api/auth/login
Content-Type: {{contentType}}

{
  "username": "boss_v2",
  "password": "password123"
}

> {%
    client.global.set("token_boss", response.body.token);
    client.log("ğŸ”‘ Boss Token Acquired");
%}

### 1.3 Boss á”á¾á€á€á»á„ (áŠá¶á€áŸ‹á›á»á™ $5000)
POST {{host}}/api/accounts
Authorization: Bearer {{token_boss}}
Content-Type: {{contentType}}

{
  "accountType": "SAVINGS",
  "initialDeposit": 5000.00,
  "pin": "123456"
}

> {%
    client.global.set("acc_boss", response.body.accountNumber);
    client.log("ğŸ’° Boss Account Created: " + response.body.accountNumber);
%}

###

# ==========================================
# ğŸ‘¤ á‡áŸ†á á¶á“á‘á¸ áŸ¢: á”á„áŸ’á€á¾á STAFF (á¢áŸ’á“á€á€áŸ’áš)
# ==========================================
# 2.1 Register
POST {{host}}/api/auth/register
Content-Type: {{contentType}}

{
  "firstname": "Little",
  "lastname": "Staff",
  "username": "staff_v2",
  "email": "staff_v2@titan.com",
  "password": "password123",
  "pin": "123456"
}

### 2.2 Login Staff
POST {{host}}/api/auth/login
Content-Type: {{contentType}}

{
  "username": "staff_v2",
  "password": "password123"
}

> {%
    client.global.set("token_staff", response.body.token);
    client.log("ğŸ”‘ Staff Token Acquired");
%}

### 2.3 Staff á”á¾á€á€á»á„ (áŠá¶á€áŸ‹á›á»á™ $0)
POST {{host}}/api/accounts
Authorization: Bearer {{token_staff}}
Content-Type: {{contentType}}

{
  "accountType": "SAVINGS",
  "initialDeposit": 0.00,
  "pin": "123456"
}

> {%
    client.global.set("acc_staff", response.body.accountNumber);
    client.log("ğŸ‘› Staff Account Created: " + response.body.accountNumber);
%}

###

# ==========================================
# ğŸš€ á‡áŸ†á á¶á“á‘á¸ áŸ£: á•áŸ’á‘áŸášá›á»á™ (The Moment of Truth)
# ==========================================
# ==========================================
# ğŸš€ á‡áŸ†á á¶á“á‘á¸ áŸ£: á•áŸ’á‘áŸášá›á»á™ (MANUAL MODE)
# ==========================================
POST {{host}}/api/transactions/transfer
Authorization: Bearer {{token_boss}}
Content-Type: {{contentType}}

{
  "senderAccountNumber": ""001202611122",
  "receiverAccountNumber": "001202633344",
  "amount": 1000.00,
  "pin": "123456",
  "description": "Manual Transfer Test"
}

# ==========================================
# ğŸ” á‡áŸ†á á¶á“á‘á¸ áŸ¤: á•áŸ’á‘áŸ€á„á•áŸ’á‘á¶ááŸ‹ (Check Balance)
# ==========================================

# 4.1 Boss (ášáŸ†á–á¹á„á‘á»á€: $4000)
GET {{host}}/api/accounts/balance/{{acc_boss}}
Authorization: Bearer {{token_boss}}

> {%
    client.test("Boss has 4000", function() {
        client.assert(response.body === 4000.00, "âŒ Boss Balance Wrong!");
    });
%}

###

# 4.2 Staff (ášáŸ†á–á¹á„á‘á»á€: $1000)
GET {{host}}/api/accounts/balance/{{acc_staff}}
Authorization: Bearer {{token_staff}}

> {%
    client.test("Staff has 1000", function() {
        client.assert(response.body === 1000.00, "âŒ Staff Balance Wrong!");
    });
%}